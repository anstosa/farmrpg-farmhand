{"version":3,"file":"farmrpg-farmhand.user.js","mappings":"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","sources":["webpack://farmrpg-farmhand/./src/features/banker.ts","webpack://farmrpg-farmhand/./src/features/buddyfarm.ts","webpack://farmrpg-farmhand/./src/features/farmhandSettings.ts","webpack://farmrpg-farmhand/./src/index.ts","webpack://farmrpg-farmhand/./src/utils/api.ts","webpack://farmrpg-farmhand/./src/utils/confirmation.ts","webpack://farmrpg-farmhand/./src/utils/page.ts","webpack://farmrpg-farmhand/./src/utils/popup.ts","webpack://farmrpg-farmhand/./src/utils/theme.ts","webpack://farmrpg-farmhand/webpack/bootstrap","webpack://farmrpg-farmhand/webpack/startup"],"sourcesContent":["import { depositSilver, withdrawSilver } from \"~/utils/api\";\nimport { Feature, FeatureSetting } from \"./feature\";\nimport {\n  getCardByTitle,\n  getCurrentPage,\n  getListByTitle,\n  Page,\n} from \"~/utils/page\";\nimport { GREEN_SUCCESS, YELLOW_WARNING } from \"~/utils/theme\";\nimport { showConfirmation } from \"~/utils/confirmation\";\nimport { showPopup } from \"~/utils/popup\";\n\nexport const SETTING_BANKER: FeatureSetting = {\n  id: \"banker\",\n  title: \"Banker\",\n  description: `\n    * Automatically calculates your target balance (minimum balance required to maximize your daily interest)\n    * Adds an option *Deposit Target Balance* which deposits up to your target balance\n    * Adds an option to *Withdraw Interest* which withdraws any earnings on top of your target balance\n  `,\n  type: \"boolean\",\n  defaultValue: true,\n};\n\nexport const banker: Feature = {\n  settings: [SETTING_BANKER],\n  onPageChange: (settings, page) => {\n    // make sure the banker is enabled\n    if (!settings[SETTING_BANKER.id].value) {\n      return;\n    }\n\n    // make sure we are on the bank page\n    if (page !== Page.BANK) {\n      return;\n    }\n\n    // make sure page content has loaded\n    const currentPage = getCurrentPage();\n    if (!currentPage) {\n      return;\n    }\n\n    // get parameters\n    const aboutCard = getCardByTitle(\"About the bank\");\n    if (!aboutCard) {\n      console.error(\"About card not found\");\n      return;\n    }\n    const parameters = aboutCard.querySelectorAll(\"strong\");\n    const interestRate =\n      Number(parameters[0].textContent?.replaceAll(\"%\", \"\")) / 100;\n    const maxInterest = Number(parameters[1].textContent?.replaceAll(\",\", \"\"));\n    const balanceCard = aboutCard.nextElementSibling;\n    if (!balanceCard) {\n      console.error(\"balance card not found\");\n      return;\n    }\n    const balanceParameters = balanceCard.querySelectorAll(\"strong\");\n    const balance = Number(\n      balanceParameters[0].textContent\n        ?.replaceAll(\",\", \"\")\n        .replaceAll(\" Silver\", \"\")\n    );\n\n    const formatter = new Intl.NumberFormat();\n\n    // calculate target balance\n    const targetBalance = Math.ceil(maxInterest / interestRate);\n    const targetBalanceDiv = document.createElement(\"div\");\n    targetBalanceDiv.classList.add(\"card-content-inner\");\n    targetBalanceDiv.innerHTML = `\n      Target Balance: <strong style=\"color: ${\n        targetBalance === balance ? GREEN_SUCCESS : YELLOW_WARNING\n      }\">${formatter.format(targetBalance)} Silver</strong>\n    `;\n    balanceCard.firstElementChild?.append(targetBalanceDiv);\n\n    const availableInterest = Math.max(0, balance - targetBalance);\n\n    console.debug(interestRate, maxInterest, balance);\n\n    // use title to find the bulk options section\n    const bulkOptionsList = getListByTitle(\"Bulk Options\");\n    if (!bulkOptionsList) {\n      console.error(\"Bulk Options list not found\");\n      return;\n    }\n\n    // deposit target balance button\n    const missingFromTarget = Math.max(0, targetBalance - balance);\n    const depositTargetLi = document.createElement(\"li\");\n    depositTargetLi.innerHTML = `\n      <a\n        href=\"#\"\n        data-view=\".view-main\"\n        class=\"item-link close-panel\"\n      >\n        <div class=\"item-content\">\n          <div class=\"item-inner\">\n            <div class=\"item-title\">\n              <i class=\"fa fa-fw fa-arrow-right\"></i>\n              Deposit Target Balance\n            </div>\n            <div class=\"item-after\">${formatter.format(\n              missingFromTarget\n            )} Silver</div>\n          </div>\n        </div>\n      </a>\n    `;\n    depositTargetLi.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      if (missingFromTarget === 0) {\n        return;\n      }\n      showConfirmation(\n        `Deposit ${formatter.format(missingFromTarget)} Silver?`,\n        async () => {\n          await depositSilver(missingFromTarget);\n          await showPopup(\"Success!\", \"You deposited Silver!\");\n          window.location.reload();\n        }\n      );\n    });\n    bulkOptionsList.insertBefore(\n      depositTargetLi,\n      // eslint-disable-next-line unicorn/prefer-at\n      bulkOptionsList.children[bulkOptionsList.children.length - 1]\n    );\n\n    // withdraw interest button\n    const withdrawInterestLi = document.createElement(\"li\");\n    withdrawInterestLi.innerHTML = `\n      <a\n        href=\"#\"\n        data-view=\".view-main\"\n        class=\"item-link close-panel\"\n      >\n        <div class=\"item-content\">\n          <div class=\"item-inner\">\n            <div class=\"item-title\">\n              <i class=\"fa fa-fw fa-arrow-left\"></i>\n              Withdraw Interest\n            </div>\n            <div class=\"item-after\">${formatter.format(\n              availableInterest\n            )} Silver</div>\n          </div>\n        </div>\n      </a>\n    `;\n    withdrawInterestLi.addEventListener(\"click\", (event) => {\n      event.preventDefault();\n      if (availableInterest === 0) {\n        return;\n      }\n      showConfirmation(\n        `Withdraw ${formatter.format(availableInterest)} Silver?`,\n        async () => {\n          await withdrawSilver(availableInterest);\n          await showPopup(\"Success!\", \"You withdrew Silver!\");\n          window.location.reload();\n        }\n      );\n    });\n    bulkOptionsList.insertBefore(\n      withdrawInterestLi,\n      // eslint-disable-next-line unicorn/prefer-at\n      bulkOptionsList.children[bulkOptionsList.children.length - 1]\n    );\n  },\n};\n","import { Feature, FeatureSetting } from \"./feature\";\nimport { getCurrentPage, Page } from \"~/utils/page\";\n\nexport const SETTING_BUDDY_FARM: FeatureSetting = {\n  id: \"buddyFarm\",\n  title: \"Buddy's Almanac\",\n  description: \"Add shortcut to look up items on buddy.farm\",\n  type: \"boolean\",\n  defaultValue: true,\n};\n\nexport const buddyFarm: Feature = {\n  settings: [SETTING_BUDDY_FARM],\n  onPageChange: (settings, page) => {\n    // make sure setting is enabled\n    if (!settings[SETTING_BUDDY_FARM.id].value) {\n      return;\n    }\n\n    // make sure page content has loaded\n    const currentPage = getCurrentPage();\n    if (!currentPage) {\n      return;\n    }\n\n    // make sure we are on an item page\n    if (page !== Page.ITEM) {\n      return;\n    }\n\n    // find header to get item data\n    const itemHeader = document.querySelector(\".sharelink\");\n    if (!itemHeader) {\n      console.error(\"Item header not found\");\n      return;\n    }\n\n    // get name and link for item\n    const itemName = itemHeader.textContent ?? \"\";\n    const itemLink = `https://buddy.farm/i/${itemName\n      .toLowerCase()\n      .replaceAll(/[\\s']/g, \"-\")}`;\n\n    // use title to find item details section\n    const titles = currentPage.querySelectorAll(\".content-block-title\");\n    const itemDetailsTitle = [...titles].find(\n      (title) => title.textContent === \"Item Details\"\n    );\n    const itemDetailsCard = itemDetailsTitle?.nextElementSibling;\n    const itemDetailsList = itemDetailsCard?.querySelector(\"ul\");\n    if (!itemDetailsList) {\n      console.error(\"Item Details list not found\");\n      return;\n    }\n\n    // create a new item detail for buddy.farm link\n    const buddyFarmLinkLi = document.createElement(\"li\");\n    buddyFarmLinkLi.classList.add(\"close-panel\");\n    buddyFarmLinkLi.innerHTML = `\n      <div class=\"item-content\">\n        <div class=\"item-media\">\n          <a\n            href=\"https://buddy.farm\"\n            onclick=\"window.open('https://buddy.farm', '_blank');return false;\"\n          >\n            <img src=\"https://buddy.farm/icons/icon-256x256.png\" class=\"itemimg\">\n          </a>\n        </div>\n        <div class=\"item-inner\">\n          <div class=\"item-title\">\n            Buddy's Almanac\n            <br><span style=\"font-size: 11px\">Lookup item on buddy.farm</span>\n          </div>\n          <div class=\"item-after\">\n            <a\n              href=\"${itemLink}\"\n              onclick=\"window.open('${itemLink}', '_blank');return false;\"\n              class=\"button btngreen\"\n              style=\"height:28px\"\n            >OPEN</a>\n          </div>\n        </div>\n      </div>\n    `;\n\n    // insert at top\n    itemDetailsList.insertBefore(buddyFarmLinkLi, itemDetailsList.firstChild);\n  },\n};\n","import { Feature, FeatureSetting, Settings } from \"./feature\";\nimport { getCurrentPage, Page } from \"~/utils/page\";\n\nexport const getSettings = async (features: Feature[]): Promise<Settings> => {\n  const settings: Settings = {};\n  for (const feature of features) {\n    for (const setting of feature.settings ?? []) {\n      settings[setting.id] = {\n        ...setting,\n        value: (await GM.getValue(setting.id, setting.defaultValue)) as any,\n      };\n    }\n  }\n  return settings;\n};\n\nexport const getSetting = async (\n  setting: FeatureSetting\n): Promise<FeatureSetting> => ({\n  ...setting,\n  value: (await GM.getValue(setting.id, setting.defaultValue)) as any,\n});\n\nexport const setSetting = (setting: FeatureSetting): Promise<void> =>\n  GM.setValue(setting.id, setting.value ?? \"\");\n\nconst getWrapper = (\n  { id, type, value }: FeatureSetting,\n  children: string\n): string => {\n  switch (type) {\n    case \"boolean\": {\n      return `\n        <div\n          class=\"item-inner\"\n          role=\"checkbox\"\n          id=\"${id}-aria\"\n          aria-labelledby=\"${id}\"\n          aria-checked=\"${value ? \"true\" : \"false\"}\"\n        >\n          ${children}\n        </div>\n      `;\n    }\n    case \"number\": {\n      return `\n        <div\n          class=\"item-inner\"\n          role=\"spinbutton\"\n          id=\"${id}-aria\"\n          aria-labelledby=\"${id}\"\n          aria-valuenow=\"${value}\"\n        >\n          ${children}\n        </div>\n      `;\n    }\n    case \"string\": {\n      return `\n        <div\n          class=\"item-inner\"\n          role=\"textbox\"\n          id=\"${id}-aria\"\n          aria-labelledby=\"${id}\"\n        >\n          ${children}\n        </div>\n      `;\n    }\n    default: {\n      return `\n        <div\n          class=\"item-inner\"\n          id=\"${id}-aria\"\n          aria-labelledby=\"${id}\"\n        >\n          ${children}\n        </div>\n      `;\n    }\n  }\n};\n\nconst getField = ({ id, type, value }: FeatureSetting): string => {\n  switch (type) {\n    case \"boolean\": {\n      return `\n        <label class=\"label-switch\">\n          <input\n            type=\"checkbox\"\n            class=\"settings_checkbox\"\n            id=\"${id}\"\n            name=\"${id}\"\n            value=\"${value ? 1 : 0}\"\n            ${value ? 'checked=\"\"' : \"\"}\"\n          />\n          <div class=\"checkbox\"></div>\n        </label>\n      `;\n    }\n    case \"string\":\n    case \"number\": {\n      return `\n        <div class=\"item-after\">\n          <input\n            type=\"text\"\n            name=\"${id}\"\n            value=\"${value}\"\n            class=\"inlineinputsm\"\n            style=\"width: 60px; font-family: -apple-system, &quot;SF UI Text&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Noto Color Emoji&quot;, EmojiNotoColor, &quot;Noto Emoji&quot;, EmojiNoto, &quot;Segoe UI&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Twitter Color Emoji&quot;, EmojiTwemColor, &quot;Twemoji Mozilla&quot;, EmojiTwem, &quot;EmojiOne Mozilla&quot;, &quot;Android Emoji&quot;, EmojiSymbols, Symbola, EmojiSymb !important;\"\n          />\n        </div>\n      `;\n    }\n    default: {\n      return \"\";\n    }\n  }\n};\n\nconst getValue = (\n  { id, type }: FeatureSetting,\n  currentPage: HTMLElement\n): FeatureSetting[\"value\"] => {\n  const input = currentPage.querySelector(`[name=${id}]`) as HTMLInputElement;\n  switch (type) {\n    case \"boolean\": {\n      const wrapper = currentPage.querySelector(\n        `[id=${id}-aria]`\n      ) as HTMLDivElement;\n      return wrapper.getAttribute(\"aria-checked\") === \"true\";\n    }\n    case \"number\": {\n      return Number(input.value);\n    }\n    case \"string\": {\n      return input.value;\n    }\n    default: {\n      return input.value;\n    }\n  }\n};\n\nexport const farmhandSettings: Feature = {\n  onPageChange: (settings, page) => {\n    // make sure we are on the settings page\n    if (page !== Page.SETTINGS_OPTIONS) {\n      return;\n    }\n\n    // make sure page content has loaded\n    const currentPage = getCurrentPage();\n    if (!currentPage) {\n      return;\n    }\n\n    // insert at end of first card\n    const settingsList = currentPage.querySelector(\"#settingsform_options ul\");\n    if (!settingsList) {\n      console.error(\"Settings list not found\");\n      return;\n    }\n\n    // add section\n    const farmhandSettingsLi = document.createElement(\"li\");\n    farmhandSettingsLi.classList.add(\"list-group-title\");\n    farmhandSettingsLi.classList.add(\"item-divider\");\n    farmhandSettingsLi.textContent = \"Farmhand Settings\";\n    settingsList.append(farmhandSettingsLi);\n\n    // add settings\n    for (const setting of Object.values(settings)) {\n      const settingLi = document.createElement(\"li\");\n      settingLi.innerHTML = `\n        <div class=\"item-content\">\n          ${getWrapper(\n            setting,\n            `\n            <div class=\"item-title label\" style=\"width:60%\">\n              <label\n                id=\"${setting.id}\"\n                for=\"${setting.id}\">\n                  ${setting.title}\n              </label>\n              <br>\n              <span style=\"font-size: 11px\">${setting.description}</span>\n            </div>\n            ${getField(setting)}\n            `\n          )}\n      </div>\n      `;\n      settingsList.append(settingLi);\n    }\n\n    // hook into save button\n    const saveButton = currentPage.querySelector(\"#settings_options\");\n    if (!saveButton) {\n      console.error(\"Save button not found\");\n      return;\n    }\n\n    saveButton.addEventListener(\"click\", () => {\n      for (const setting of Object.values(settings)) {\n        setting.value = getValue(setting, currentPage);\n        setSetting(setting);\n      }\n      setTimeout(() => window.location.reload(), 1000);\n    });\n  },\n};\n","import { banker } from \"./features/banker\";\nimport { buddyFarm } from \"~/features/buddyfarm\";\nimport { farmhandSettings, getSettings } from \"./features/farmhandSettings\";\nimport { getPage, Page } from \"~/utils/page\";\n\nconst FEATURES = [buddyFarm, farmhandSettings, banker];\n\nconst onPageChange = async (\n  page: Page | undefined,\n  parameters: URLSearchParams\n): Promise<void> => {\n  const settings = await getSettings(FEATURES);\n  for (const { onPageChange } of FEATURES) {\n    if (onPageChange) {\n      onPageChange(settings, page, parameters);\n    }\n  }\n};\n\n(function () {\n  // eslint-disable-next-line unicorn/prefer-module\n  \"use strict\";\n  console.info(\"STARTING Farmhand by Ansel Santosa\");\n\n  // listen for location changes\n  let oldHref = document.location.href;\n  const { body } = document;\n  const observer = new MutationObserver(() => {\n    if (oldHref !== document.location.href) {\n      oldHref = document.location.href;\n      const [page, parameters] = getPage();\n      console.debug(\"Page Change\", page, parameters);\n      onPageChange(page, parameters);\n    }\n  });\n  observer.observe(body, { childList: true, subtree: true });\n\n  // process first page\n  setTimeout(() => onPageChange(...getPage()));\n})();\n","export const sendRequest = async (\n  query: URLSearchParams\n): Promise<Document> => {\n  const response = await fetch(\n    `https://farmrpg.com/worker.php?${query.toString()}`,\n    {\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  }\n  const htmlString = await response.text();\n  return new DOMParser().parseFromString(htmlString, \"text/html\");\n};\n\nexport interface Stats {\n  silver: number;\n  gold: number;\n  ancientCoins: number;\n}\n\nexport const getStats = async (): Promise<Stats> => {\n  const response = await sendRequest(new URLSearchParams({ go: \"getstats\" }));\n  const parameters = response.querySelectorAll(\"span\");\n  const silver = Number(\n    parameters[0].textContent?.trim().replaceAll(\",\", \"\") ?? \"0\"\n  );\n  const gold = Number(\n    parameters[1].textContent?.trim().replaceAll(\",\", \"\") ?? \"0\"\n  );\n  const ancientCoins = Number(\n    parameters[2].textContent?.trim().replaceAll(\",\", \"\") ?? \"0\"\n  );\n  return { silver, gold, ancientCoins };\n};\n\nexport const depositSilver = async (amount: number): Promise<void> => {\n  await sendRequest(\n    new URLSearchParams({ go: \"depositsilver\", amt: amount.toString() })\n  );\n};\n\nexport const withdrawSilver = async (amount: number): Promise<void> => {\n  await sendRequest(\n    new URLSearchParams({ go: \"withdrawalsilver\", amt: amount.toString() })\n  );\n};\n","export const showConfirmation = (\n  message: string,\n  onYes: () => void,\n  onNo?: () => void\n): void => {\n  const overlay = document.createElement(\"div\");\n  overlay.classList.add(\"modal-overlay\");\n  overlay.classList.add(\"modal-overlay-visible\");\n  document.body.append(overlay);\n\n  const modal = document.createElement(\"div\");\n  modal.classList.add(\"actions-modal\");\n  modal.classList.add(\"modal-in\");\n  modal.innerHTML = `\n      <div class=\"actions-modal-group\">\n        <div class=\"actions-modal-label\">${message}</div>\n        <div class=\"actions-modal-button\">Yes</div>\n        <div class=\"actions-modal-button color-red\">Cancel</div>\n      </div>\n    `;\n  const buttons = modal.querySelectorAll(\".actions-modal-button\");\n  const yesButton = buttons[0];\n  yesButton.addEventListener(\"click\", () => {\n    overlay?.classList.remove(\"modal-overlay-visible\");\n    modal.remove();\n    onYes();\n  });\n  const noButton = buttons[1];\n  noButton.addEventListener(\"click\", () => {\n    overlay?.classList.remove(\"modal-overlay-visible\");\n    modal.remove();\n    onNo?.();\n  });\n  document.body.append(modal);\n};\n","export enum Page {\n  ITEM = \"item\",\n  BANK = \"bank\",\n  SETTINGS = \"settings\",\n  SETTINGS_OPTIONS = \"settings_options\",\n}\n\n// get page and parameters if any\nexport const getPage = (): [Page | undefined, URLSearchParams] => {\n  const match = window.location.hash.match(/#!\\/(\\w+).php\\?{0,1}(.*)/);\n  if (!match) {\n    return [undefined, new URLSearchParams()];\n  }\n  const page = match[1];\n  const parameters = new URLSearchParams(match[2]);\n  return [page as Page, parameters];\n};\n\nexport const getPreviousPage = (): HTMLElement | null =>\n  document.querySelector(\".page-on-left\");\n\nexport const getCurrentPage = (): HTMLElement | null =>\n  document.querySelector(\".page-on-center, .page-from-right-to-center\");\n\nexport const setTitle = (title: string): void => {\n  const nav = document.querySelector(\".navbar-on-center\");\n  if (!nav) {\n    console.error(\"Navbar not found\");\n    return;\n  }\n  const text = nav?.querySelector(\"center\");\n  if (!text) {\n    console.error(\"Center text not found\");\n    return;\n  }\n  text.textContent = title;\n};\n\nexport const getCardByTitle = (searchTitle: string): Element | null => {\n  const currentPage = getCurrentPage();\n  if (!currentPage) {\n    console.error(\"Current page not found\");\n    return null;\n  }\n  const titles = currentPage.querySelectorAll(\".content-block-title\");\n  const targetTitle = [...titles].find(\n    (title) => title.textContent === searchTitle\n  );\n  if (!targetTitle) {\n    console.error(`${searchTitle} title not found`);\n    return null;\n  }\n  return targetTitle.nextElementSibling;\n};\n\nexport const getListByTitle = (searchTitle: string): HTMLElement | null => {\n  const targetCard = getCardByTitle(searchTitle);\n  if (!targetCard) {\n    console.error(`${searchTitle} card not found`);\n    return null;\n  }\n  return targetCard.querySelector(\"ul\");\n};\n","export const showPopup = (title: string, description: string): Promise<void> =>\n  new Promise((resolve) => {\n    const overlay = document.createElement(\"div\");\n    overlay.classList.add(\"modal-overlay\");\n    overlay.classList.add(\"modal-overlay-visible\");\n    document.body.append(overlay);\n\n    const modal = document.createElement(\"div\");\n    modal.classList.add(\"modal\");\n    modal.classList.add(\"modal-in\");\n    modal.style.display = \"block\";\n    modal.style.marginTop = \"-62px\";\n    modal.innerHTML = `\n    <div class=\"modal-inner\">\n      <div class=\"modal-title\">${title}</div>\n      <div class=\"modal-text\">${description}</div>\n    </div>\n    <div class=\"modal-buttons modal-buttons-1\">\n      <span class=\"modal-button modal-button-bold\">OK</span>\n    </div>\n  `;\n    const okButton = modal.querySelector(\".modal-button\");\n    okButton?.addEventListener(\"click\", () => {\n      overlay?.classList.remove(\"modal-overlay-visible\");\n      modal.remove();\n      resolve();\n    });\n    document.body.append(modal);\n  });\n","// links\nexport const GREEN_LINK = \"#90EE90\";\nexport const RED_LINK = \"#ED143D\";\n\n// alerts\nexport const YELLOW_ALERT = \"#351C04\";\nexport const YELLOW_ALERT_BORDER = \"#41260D\";\n\n// text\nexport const RED_ERROR = \"#FF0000\";\nexport const YELLOW_WARNING = \"#FFA500\";\nexport const GREEN_SUCCESS = \"#30D611\";\n\n// buttons\nexport const GREEN_BUTTON = \"#003300\";\nexport const GREEN_BUTTON_BORDER = \"#006600\";\nexport const GREEN_DARK_BUTTON = \"#001900\";\nexport const GREEN_DARK_BUTTON_BORDER = \"#003300\";\nexport const ORANGE_BUTTON = \"#351C04\";\nexport const ORANGE_BUTTON_BORDER = \"#41260D\";\nexport const BLUE_BUTTON = \"#000040\";\nexport const BLUE_BUTTON_BORDER = \"#00007F\";\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(217);\n"],"names":["SETTING_BANKER","id","title","description","type","defaultValue","banker","settings","onPageChange","page","value","Page","BANK","getCurrentPage","aboutCard","getCardByTitle","console","error","parameters","querySelectorAll","interestRate","Number","textContent","replaceAll","maxInterest","balanceCard","nextElementSibling","balanceParameters","balance","formatter","Intl","NumberFormat","targetBalance","Math","ceil","targetBalanceDiv","document","createElement","classList","add","innerHTML","GREEN_SUCCESS","YELLOW_WARNING","format","firstElementChild","append","availableInterest","max","debug","bulkOptionsList","getListByTitle","missingFromTarget","depositTargetLi","addEventListener","event","preventDefault","showConfirmation","depositSilver","showPopup","window","location","reload","insertBefore","children","length","withdrawInterestLi","withdrawSilver","SETTING_BUDDY_FARM","buddyFarm","currentPage","ITEM","itemHeader","querySelector","itemLink","toLowerCase","itemDetailsTitle","find","itemDetailsCard","itemDetailsList","buddyFarmLinkLi","firstChild","getSettings","features","feature","setting","GM","getValue","getSetting","setSetting","setValue","getWrapper","getField","input","getAttribute","farmhandSettings","SETTINGS_OPTIONS","settingsList","farmhandSettingsLi","Object","values","settingLi","saveButton","setTimeout","FEATURES","info","oldHref","href","body","MutationObserver","getPage","observe","childList","subtree","sendRequest","query","response","fetch","toString","method","mode","credentials","ok","Error","statusText","htmlString","text","DOMParser","parseFromString","getStats","URLSearchParams","go","silver","trim","gold","ancientCoins","amount","amt","message","onYes","onNo","overlay","modal","buttons","remove","match","hash","undefined","getPreviousPage","setTitle","nav","searchTitle","targetTitle","targetCard","Promise","resolve","style","display","marginTop","okButton","GREEN_LINK","RED_LINK","YELLOW_ALERT","YELLOW_ALERT_BORDER","RED_ERROR","GREEN_BUTTON","GREEN_BUTTON_BORDER","GREEN_DARK_BUTTON","GREEN_DARK_BUTTON_BORDER","ORANGE_BUTTON","ORANGE_BUTTON_BORDER","BLUE_BUTTON","BLUE_BUTTON_BORDER","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call"],"sourceRoot":""}